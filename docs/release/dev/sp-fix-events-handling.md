Fixed events handling, should be less errors.