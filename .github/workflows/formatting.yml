name: Formatting check
on: [push, pull_request]
jobs:
    formatting-check:
        name: Formatting Check
        runs-on: ubuntu-latest
        steps:
          - name: Checkout
            uses: actions/checkout@v2
          # - name: Ensure files terminated with one LF
          #   uses: fernandrone/linelint@0.0.6
          #   id: linelint
          - name: Ensure files use LF line endings instead of CRLF
            uses: erclu/check-crlf@v1
          - uses: DoozyX/clang-format-lint-action@v0.14
            with:
              source: '.'
              exclude: './skyrim-platform/src/third_party'
              extensions: 'h,cpp,hpp'
              clangFormatVersion: 12
              inplace: True
          - uses: EndBug/add-and-commit@v9
            with:
              default_author: github_actor
              message: 'Committing clang-format changes'
            env:
              GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}